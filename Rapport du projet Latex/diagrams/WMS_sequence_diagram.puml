@startuml WMS_sequence_diagram
!theme plain
title Diagramme de séquence : Workflow général Smart Water Monitoring

actor Utilisateur
participant "Interface Utilisateur" as UI
participant "Système Monitoring" as System
participant CapteurIoT
participant HistoriqueConsommation
participant ObjectifConsommation
participant Alerte

Utilisateur -> UI : se connecter
UI -> System : authentifier(utilisateur)
System -> Utilisateur : authentification réussie

Utilisateur -> UI : consulter consommation
UI -> System : récupérer données capteurs
System -> CapteurIoT : obtenir données
CapteurIoT --> System : données capteur
System -> HistoriqueConsommation : enregistrer consommation
System -> ObjectifConsommation : vérifier objectifs
ObjectifConsommation --> System : seuil dépassé ?

alt objectif dépassé
    System -> Alerte : générer alerte
    Alerte --> Utilisateur : notifier
end

System --> UI : afficher consommation et alertes

@enduml
